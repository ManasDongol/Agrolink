<app-navbar></app-navbar>
<div class="crops-page">



  <form  class="card crop-recommend-card"
      [formGroup]="RecomendationForm"
      (ngSubmit)="submit()">

    <h2 class="card-title">Crop recommendation system</h2>

    <div class="form-grid">

      <div class="input-group">
        <label>Nitrogen</label>
        <input type="number" formControlName = "Nitrogen" />
      </div>
      @if (RecomendationForm.get('Nitrogen')?.invalid && (RecomendationForm.get('Nitrogen')?.dirty || RecomendationForm.get('Nitrogen')?.touched)) {
  <div>
    Nitrogen value is required.
  </div>
}

      <div class="input-group">
        <label>Phosphorus</label>
        <input type="number" formControlName = "Phosphorus" />
      </div>
   @if (RecomendationForm.get('Phosphorus')?.invalid && (RecomendationForm.get('Phosphorus')?.dirty || RecomendationForm.get('Phosphorus')?.touched)) {
  <div>
    Phosphorus is required.
  </div>
}
      <div class="input-group">
        <label>Humidity</label>
        <input type="number" formControlName = "Humidity"   />
      </div>

   @if (RecomendationForm.get('Humidity')?.invalid && (RecomendationForm.get('Humidity')?.dirty || RecomendationForm.get('Humidity')?.touched)) {
  <div>
    Humidity is required.
  </div>
}
      <div class="input-group">
        <label>Temperature</label>
        <input type="number" formControlName = "Temperature"  />
      </div>
   @if (RecomendationForm.get('Temperature')?.invalid && (RecomendationForm.get('Temperature')?.dirty || RecomendationForm.get('Temperature')?.touched)) {
  <div>
    Temperature is required.
  </div>
}
      <div class="input-group">
        <label>Potassium</label>
        <input type="number" formControlName = "Potassium"  />
      </div>
   @if (RecomendationForm.get('Potassium')?.invalid && (RecomendationForm.get('Potassium')?.dirty || RecomendationForm.get('Potassium')?.touched)) {
  <div>
    Potassium is required.
  </div>
}
      <div class="input-group">
        <label>Rainfall</label>
        <input type="number"  formControlName = "Rainfall" />
      </div>

  @if (RecomendationForm.get('Rainfall')?.invalid && (RecomendationForm.get('Rainfall')?.dirty || RecomendationForm.get('Rainfall')?.touched)) {
  <div>
    Rainfall is required.
  </div>
}
  
      <div class="input-group">
        <label>pH</label>
        <input type="number"  formControlName = "pH" />
      </div>
@if (RecomendationForm.get('pH')?.invalid && (RecomendationForm.get('pH')?.dirty || RecomendationForm.get('pH')?.touched)) {
  <div>
    pH is required.
  </div>
}
    </div>

    <div class="recommend-footer">

      <div class="recommend-result">
        <h4>Recommendation :</h4>
        <p><strong>Crop :</strong> {{ crop }}</p>
        <p><strong>Fertilizer :</strong> {{ fertilizer }}</p>
      </div>

      <button class="btn btn-primary" (click)="submit()">
        Generate Recommendation
      </button>

    </div>

  </form>



  <div class="card crop-price-card">

    <div class="card-header">

      <div>
        <h2 class="card-title">Latest Crop Prices</h2>
        <span class="muted-text">last updated on : 20/12/2025</span>
      </div>

      <div class="search-box">
        <input type="text"  class="search-input"
  placeholder="Search crops / markets..."
  [formControl]="SearchControl" />
        <button class="btn btn-primary" (click)="searchCrop()">Search</button>
      </div>

    </div>

    <div class="table-wrapper">

      <table class="crop-table">

        <thead>
          
          <tr>
            <th>Commodity</th>
            <th>Unit (Per)</th>
            <th>Minimum (Nrs/रु)</th>
            <th>Maximum (Nrs/रु)</th>
            <th>Average (Nrs/रु)</th>
          </tr>
        </thead>

        <tbody>
          @for(crops of priceList;track crops){
            <tr>
              <td>{{crops.commodity}}</td>
              <td>{{crops.unit}}</td>
              <td>{{crops.minimum}}</td>
              <td>{{crops.maximum}}</td>
              <td>{{crops.average}}</td>
          </tr>
          }
         

         

        </tbody>

      </table>

    </div>

  </div>

</div>
